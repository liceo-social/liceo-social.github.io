(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{373:function(e,a,t){"use strict";t.r(a);var r=t(42),s=Object(r.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"docker-compose"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose"}},[e._v("#")]),e._v(" Docker Compose")]),e._v(" "),t("p",[e._v("Si quieres correr la aplicacion contra una base de datos mas seria y no complicarte mucho, quizas la mejor opcion es usar el repositorio https://github.com/liceo-social/liceo-docker-compose. Para poder utilizar este repositorio deberias tener pre instalado "),t("a",{attrs:{href:"https://docs.docker.com/compose/",target:"_blank",rel:"noopener noreferrer"}},[e._v("docker-compose"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("p",[e._v("Clonate el repositorio con "),t("a",{attrs:{href:"https://git-scm.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Git"),t("OutboundLink")],1),e._v(":")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" clone https://github.com/liceo-social/liceo-docker-compose\n")])])]),t("blockquote",[t("p",[t("a",{attrs:{href:"https://git-scm.com/book/es/v2",target:"_blank",rel:"noopener noreferrer"}},[e._v("En este link"),t("OutboundLink")],1),e._v(" puedes encontrar un enlace de como usar Git en espa√±ol")])]),e._v(" "),t("p",[e._v("Si entras dentro del repositorio que acabas de clonar encontraras 2 ficheros "),t("code",[e._v("docker-compose.yml")]),e._v(" y el script "),t("code",[e._v("liceo.sh")]),e._v(".")]),e._v(" "),t("h2",{attrs:{id:"liceo-sh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#liceo-sh"}},[e._v("#")]),e._v(" liceo.sh")]),e._v(" "),t("p",[e._v("Para facilitar la ejecucion y el mantenimiento de la aplicacion, se ha creado el comando "),t("code",[e._v("liceo.sh")]),e._v(" que permite entre otras cosas, arrancar/parar la aplicacion, y hacer un backup tanto de la base de datos como de los ficheros creados utilizando "),t("code",[e._v("docker-compose")]),e._v(".")]),e._v(" "),t("h3",{attrs:{id:"arrancar-y-parar-la-aplicacion"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#arrancar-y-parar-la-aplicacion"}},[e._v("#")]),e._v(" arrancar y parar la aplicacion")]),e._v(" "),t("p",[e._v("Para arrancar los contenedores (manager + db):")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("./liceo.sh startup\n")])])]),t("p",[e._v("Para parar los contenedores (manager + db):")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("./liceo.sh "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("shutdown")]),e._v("\n")])])]),t("p",[e._v("Para saber el estado de los contenedores:")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("./liceo.sh status\n")])])]),t("h3",{attrs:{id:"backup-de-la-aplicacion"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#backup-de-la-aplicacion"}},[e._v("#")]),e._v(" backup de la aplicacion")]),e._v(" "),t("p",[e._v("Para hacer un backup tanto de la base de datos como los ficheros creados:")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("./liceo.sh backup\n")])])]),t("h3",{attrs:{id:"logs-en-tiempo-real-de-la-aplicacion"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#logs-en-tiempo-real-de-la-aplicacion"}},[e._v("#")]),e._v(" logs en tiempo real de la aplicacion")]),e._v(" "),t("p",[e._v("En caso de que haya que analizar alguna traza de la aplicacion.")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("./liceo.sh logs\n")])])]),t("h2",{attrs:{id:"configuracion"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configuracion"}},[e._v("#")]),e._v(" Configuracion")]),e._v(" "),t("p",[e._v("Por defecto se ejecutara la aplicacion contra una base de datos PostgreSQL y los ficheros creados se guardaran en "),t("code",[e._v("/tmp/kk")]),e._v(". Puedes configurar "),t("code",[e._v("Liceo")]),e._v(" para correr contra una base de datos H2 (en memoria), PostgreSQL o MariaDB y tambien configurar el directorio en donde se guardaran los ficheros. Para cambiar estos datos debes pasar una serie de variables de entorno a la ejecucion de Docker.")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("Variable")]),e._v(" "),t("th",{staticStyle:{"text-align":"center"}},[e._v("Descripcion")]),e._v(" "),t("th",{staticStyle:{"text-align":"right"}},[e._v("valor por defecto")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("ADMIN_NAME")]),e._v(" "),t("td",{staticStyle:{"text-align":"center"}},[e._v("Nombre del administrador")]),e._v(" "),t("td",{staticStyle:{"text-align":"right"}},[e._v("admin")])]),e._v(" "),t("tr",[t("td",[e._v("ADMIN_USERNAME")]),e._v(" "),t("td",{staticStyle:{"text-align":"center"}},[e._v("Nombre con el que el administrador se loga")]),e._v(" "),t("td",{staticStyle:{"text-align":"right"}},[e._v("admin")])]),e._v(" "),t("tr",[t("td",[e._v("ADMIN_PASSWORD")]),e._v(" "),t("td",{staticStyle:{"text-align":"center"}},[e._v("Password inicial del administrador")]),e._v(" "),t("td",{staticStyle:{"text-align":"right"}},[e._v("admin")])]),e._v(" "),t("tr",[t("td",[e._v("DATABASE_URL")]),e._v(" "),t("td",{staticStyle:{"text-align":"center"}},[e._v("URL de la base de datos (JDBC)")]),e._v(" "),t("td",{staticStyle:{"text-align":"right"}},[e._v("*")])]),e._v(" "),t("tr",[t("td",[e._v("DATABASE_USERNAME")]),e._v(" "),t("td",{staticStyle:{"text-align":"center"}},[e._v("Username de la base de datos")]),e._v(" "),t("td",{staticStyle:{"text-align":"right"}},[e._v("liceo")])]),e._v(" "),t("tr",[t("td",[e._v("DATABASE_PASSWORD")]),e._v(" "),t("td",{staticStyle:{"text-align":"center"}},[e._v("Password de la base de datos")]),e._v(" "),t("td",{staticStyle:{"text-align":"right"}},[e._v("liceo")])]),e._v(" "),t("tr",[t("td",[e._v("DATABASE_DRIVER_CLASSNAME")]),e._v(" "),t("td",{staticStyle:{"text-align":"center"}},[e._v("Nombre de la clase que crear las conexiones")]),e._v(" "),t("td",{staticStyle:{"text-align":"right"}},[e._v("org.h2.Driver")])]),e._v(" "),t("tr",[t("td",[e._v("STORAGE_PATH")]),e._v(" "),t("td",{staticStyle:{"text-align":"center"}},[e._v("Directorio donde guardar los ficheros")]),e._v(" "),t("td",{staticStyle:{"text-align":"right"}},[e._v("/tmp/kk")])])])]),e._v(" "),t("p",[e._v("*jdbc:h2:mem:devDb;MVCC=TRUE;LOCK_TIMEOUT=10000;DB_CLOSE_ON_EXIT=FALSE")]),e._v(" "),t("p",[e._v("El valor de "),t("code",[e._v("DATABASE_DRIVER_CLASSNAME")]),e._v(" y "),t("code",[e._v("DATABASE_URL")]),e._v(" varia dependiendo de la base de datos que se elija:")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("Base de datos")]),e._v(" "),t("th",[e._v("DATABASE_DRIVER_CLASSNAME")]),e._v(" "),t("th",[e._v("DATABASE_URL")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("H2")]),e._v(" "),t("td",[e._v("org.h2.Driver")]),e._v(" "),t("td",[e._v("jdbc:h2:mem:devDb;MVCC=TRUE;LOCK_TIMEOUT=10000;DB_CLOSE_ON_EXIT=FALSE}")])]),e._v(" "),t("tr",[t("td",[e._v("PostgreSQL")]),e._v(" "),t("td",[e._v("org.postgresql.Driver")]),e._v(" "),t("td",[e._v("jdbc:postgresql://host[:puerto]/basededatos")])])])])])}),[],!1,null,null,null);a.default=s.exports}}]);